(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83],{644:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/listings",function(){return s(5516)}])},5516:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>k});var t=s(7876),l=s(4232),i=s(9099),r=s(1886),n=s(9652),c=s(6124),o=s(1713);let d=(0,o.A)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),m=(0,o.A)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),x=(0,o.A)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var u=s(672),p=s(9516),y=s(7328),g=s.n(y),h=s(3122),b=s(9371),j=s(870),v=s(4289),f=s(784),N=s(7244);let k=()=>{var e;let a=(0,i.useRouter)(),[s,o]=(0,l.useState)([]),[y,k]=(0,l.useState)([]),[w,C]=(0,l.useState)(!0),[M,A]=(0,l.useState)("grid"),[L,P]=(0,l.useState)(!1),[S,_]=(0,l.useState)("recommended"),[B,E]=(0,l.useState)({location:"",priceMin:"",priceMax:"",type:"",guests:"",amenities:[],rating:"",instantBook:!1});(0,l.useEffect)(()=>{F()},[]),(0,l.useEffect)(()=>{let e=a.query;e.location&&E(a=>({...a,location:e.location})),e.guests&&E(a=>({...a,guests:e.guests})),e.checkin,e.checkout},[a.query]),(0,l.useEffect)(()=>{G()},[s,B,S]);let F=async()=>{try{C(!0);let e=await (0,N.ml)();o(e),k(e)}catch(e){console.error("Error loading listings:",e)}finally{C(!1)}},G=()=>{let e=[...s];switch(B.location&&(e=e.filter(e=>e.location.toLowerCase().includes(B.location.toLowerCase())||e.title.toLowerCase().includes(B.location.toLowerCase()))),B.priceMin&&(e=e.filter(e=>e.price>=parseInt(B.priceMin))),B.priceMax&&(e=e.filter(e=>e.price<=parseInt(B.priceMax))),B.type&&(e=e.filter(e=>e.type.toLowerCase()===B.type.toLowerCase())),B.guests&&(e=e.filter(e=>e.maxGuests>=parseInt(B.guests))),B.rating&&(e=e.filter(e=>e.rating>=parseFloat(B.rating))),B.instantBook&&(e=e.filter(e=>e.instantBook)),B.amenities.length>0&&(e=e.filter(e=>B.amenities.every(a=>{switch(a){case"wifi":return e.features.wifi;case"parking":return e.features.parking;case"kitchen":return e.features.kitchen;case"petFriendly":return e.features.petFriendly;default:return!0}}))),S){case"price-low":e.sort((e,a)=>e.price-a.price);break;case"price-high":e.sort((e,a)=>a.price-e.price);break;case"rating":e.sort((e,a)=>a.rating-e.rating);break;case"reviews":e.sort((e,a)=>a.reviewCount-e.reviewCount);break;case"newest":e.sort((e,a)=>a.id-e.id)}k(e)},H=(e,a)=>{E(s=>({...s,[e]:a}))},R=e=>{E(a=>({...a,amenities:a.amenities.includes(e)?a.amenities.filter(a=>a!==e):[...a.amenities,e]}))},T=()=>{E({location:"",priceMin:"",priceMax:"",type:"",guests:"",amenities:[],rating:"",instantBook:!1})},q=[{value:"",label:"All Types"},{value:"cabin",label:"Mountain Cabin"},{value:"cottage",label:"Beach Cottage"},{value:"camp",label:"Desert Camp"},{value:"lodge",label:"Eco Lodge"},{value:"houseboat",label:"Houseboat"},{value:"bungalow",label:"Heritage Bungalow"}],I=[{value:"wifi",label:"WiFi"},{value:"parking",label:"Parking"},{value:"kitchen",label:"Kitchen"},{value:"petFriendly",label:"Pet Friendly"}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g(),{children:[(0,t.jsx)("title",{children:"VillageStay | Listings"}),(0,t.jsx)("meta",{name:"description",content:"Browse authentic rural accommodations across India. Mountain cabins, beach cottages, desert camps, and more."})]}),(0,t.jsx)(h.A,{className:"navbar-fixed"}),(0,t.jsxs)("main",{className:"page-content bg-gray-50 min-h-screen",children:[(0,t.jsx)("section",{className:"bg-gray-50 py-8",children:(0,t.jsx)("div",{className:"container-custom",children:(0,t.jsx)(v.A,{onSearch:e=>{E(a=>({...a,location:e.location||"",guests:e.guests||""}))}})})}),(0,t.jsx)("section",{className:"section-padding",children:(0,t.jsx)("div",{className:"container-custom",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,t.jsx)("div",{className:"lg:w-80 ".concat(L?"block":"hidden lg:block"),children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-md p-6 sticky top-24",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Filters"}),(0,t.jsx)("button",{onClick:T,className:"text-primary-500 hover:text-primary-600 text-sm",children:"Clear All"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",value:B.location,onChange:e=>H("location",e.target.value),placeholder:"Search locations...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range (per night)"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("input",{type:"number",value:B.priceMin,onChange:e=>H("priceMin",e.target.value),placeholder:"Min",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"}),(0,t.jsx)("input",{type:"number",value:B.priceMax,onChange:e=>H("priceMax",e.target.value),placeholder:"Max",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),(0,t.jsx)("select",{value:B.type,onChange:e=>H("type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",children:q.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Guests"}),(0,t.jsxs)("select",{value:B.guests,onChange:e=>H("guests",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",children:[(0,t.jsx)("option",{value:"",children:"Any"}),[1,2,3,4,5,6,7,8].map(e=>(0,t.jsxs)("option",{value:e,children:[e," ",1===e?"Guest":"Guests"]},e))]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Rating"}),(0,t.jsx)("div",{className:"space-y-2",children:[4.5,4,3.5,3].map(e=>(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",name:"rating",value:e,checked:B.rating===e.toString(),onChange:e=>H("rating",e.target.value),className:"mr-2"}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c.A,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),(0,t.jsxs)("span",{className:"text-sm",children:[e,"+"]})]})]},e))})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amenities"}),(0,t.jsx)("div",{className:"space-y-2",children:I.map(e=>(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:B.amenities.includes(e.value),onChange:()=>R(e.value),className:"mr-2"}),(0,t.jsx)("span",{className:"text-sm",children:e.label})]},e.value))})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:B.instantBook,onChange:e=>H("instantBook",e.target.checked),className:"mr-2"}),(0,t.jsx)("span",{className:"text-sm",children:"Instant Book Only"})]})})]})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:[y.length," properties found"]}),B.location&&(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["in ",B.location]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("button",{onClick:()=>P(!L),className:"lg:hidden flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,t.jsx)(d,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Filters"})]}),(0,t.jsx)("select",{value:S,onChange:e=>_(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",children:[{value:"recommended",label:"Recommended"},{value:"price-low",label:"Price: Low to High"},{value:"price-high",label:"Price: High to Low"},{value:"rating",label:"Highest Rated"},{value:"reviews",label:"Most Reviews"},{value:"newest",label:"Newest"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>A("grid"),className:"p-2 rounded-lg ".concat("grid"===M?"bg-primary-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:(0,t.jsx)(m,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>A("list"),className:"p-2 rounded-lg ".concat("list"===M?"bg-primary-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:(0,t.jsx)(x,{className:"w-4 h-4"})})]})]})]}),(B.location||B.type||B.priceMin||B.priceMax||B.guests||B.amenities.length>0)&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6",children:[B.location&&(0,t.jsxs)("span",{className:"bg-primary-100 text-primary-800 px-3 py-1 rounded-full text-sm flex items-center",children:["Location: ",B.location,(0,t.jsx)("button",{onClick:()=>H("location",""),className:"ml-2 hover:text-primary-600",children:(0,t.jsx)(u.A,{className:"w-3 h-3"})})]}),B.type&&(0,t.jsxs)("span",{className:"bg-primary-100 text-primary-800 px-3 py-1 rounded-full text-sm flex items-center",children:["Type: ",null==(e=q.find(e=>e.value===B.type))?void 0:e.label,(0,t.jsx)("button",{onClick:()=>H("type",""),className:"ml-2 hover:text-primary-600",children:(0,t.jsx)(u.A,{className:"w-3 h-3"})})]}),(B.priceMin||B.priceMax)&&(0,t.jsxs)("span",{className:"bg-primary-100 text-primary-800 px-3 py-1 rounded-full text-sm flex items-center",children:["Price: ",B.priceMin||"0"," - ",B.priceMax||"∞",(0,t.jsx)("button",{onClick:()=>{H("priceMin",""),H("priceMax","")},className:"ml-2 hover:text-primary-600",children:(0,t.jsx)(u.A,{className:"w-3 h-3"})})]}),B.guests&&(0,t.jsxs)("span",{className:"bg-primary-100 text-primary-800 px-3 py-1 rounded-full text-sm flex items-center",children:["Guests: ",B.guests,(0,t.jsx)("button",{onClick:()=>H("guests",""),className:"ml-2 hover:text-primary-600",children:(0,t.jsx)(u.A,{className:"w-3 h-3"})})]}),B.amenities.map(e=>{var a;return(0,t.jsxs)("span",{className:"bg-primary-100 text-primary-800 px-3 py-1 rounded-full text-sm flex items-center",children:[null==(a=I.find(a=>a.value===e))?void 0:a.label,(0,t.jsx)("button",{onClick:()=>R(e),className:"ml-2 hover:text-primary-600",children:(0,t.jsx)(u.A,{className:"w-3 h-3"})})]},e)})]}),w?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>(0,t.jsx)("div",{className:"loading-skeleton h-96 rounded-2xl"},e))}):0===y.length?(0,t.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(p.A,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No properties found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters or search criteria"}),(0,t.jsx)("button",{onClick:T,className:"btn-primary",children:"Clear Filters"})]}):(0,t.jsx)("div",{className:"grid gap-6 ".concat("grid"===M?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:y.map((e,a)=>(0,t.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*a},children:(0,t.jsx)(j.A,{listing:e,className:"list"===M?"flex-row":""})},e.id))}),y.length>0&&(0,t.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-center mt-12",children:(0,t.jsx)("button",{className:"btn-primary",children:"Load More Properties"})})]})]})})})]}),(0,t.jsx)(b.A,{}),(0,t.jsx)(f.A,{})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[213,874,626,244,96,615,268,636,593,792],()=>a(644)),_N_E=e.O()}]);